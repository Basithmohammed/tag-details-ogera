<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OGERA Service</title>
    <link rel="icon" type="image/png" href="logo.jpeg">
   
    <!-- EmailJS -->
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <!-- Choices.js for searchable dropdown -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

    <script>
        (function () {
            emailjs.init("EL0iKkv9XdLt50uLZ");
        })();
    </script>

    <style>
        body {
            background: linear-gradient(135deg, #1f1f1f, #2c2c2c);
            min-height: 100vh;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', Arial, sans-serif;
        }

        #salesForm {
            background: #2b2b2b;
            padding: 40px 35px;
            border-radius: 16px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            min-width: 350px;
            max-width: 450px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
            color: #f0f0f0;
        }

        #salesForm h2 {
            text-align: center;
            color: #00c6ff;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        #salesForm label {
            font-weight: 600;
            color: #e0e0e0;
        }

        #salesForm select,
        #salesForm input,
        #salesForm textarea {
            padding: 12px 14px;
            border: 1px solid #555;
            border-radius: 8px;
            font-size: 1rem;
            background: #3a3a3a;
            color: #f0f0f0;
            outline: none;
        }

        #salesForm select:focus,
        #salesForm input:focus,
        #salesForm textarea:focus {
            border-color: #00c6ff;
            box-shadow: 0 0 8px rgba(0, 198, 255, 0.4);
        }

        #salesForm textarea {
            resize: none;
        }

        #salesForm button {
            padding: 12px 0;
            border: none;
            border-radius: 8px;
            background: #00c6ff;
            color: #1f1f1f;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }

        #salesForm button:hover {
            background: #00a0cc;
        }

        .choices__inner {
            color: #000 !important;
            background-color: #fff !important;
        }

        .choices__list--dropdown .choices__item--choice {
            color: #000 !important;
        }

        #salesPersonId,
        #productId,
        #dealerContact {
            background: #e0e0e0 !important;
            color: #000 !important;
        }
    </style>
</head>

<script>
    // Check if user is logged in
    const user = sessionStorage.getItem('loggedInUser');
    if (!user) {
        // Redirect to login page if not logged in
        window.location.href = 'login.html';
    } else {
        // Optional: Pre-fill Sales Person field if needed
        const salesPersonMap = { "Irshad": "1", "Shafeek Rahman": "2", "Sreejith P": "3", "Sunish Chacko": "4", "Vinod Kumar": "5", "Muhammed Shafeeque KB": "6", "Ashmil": "7", "Nandu P": "8" };
        const salesPersonIdMap = { "Irshad": "4004", "Shafeek Rahman": "4005", "Sreejith P": "4006", "Sunish Chacko": "4007", "Vinod Kumar": "4008", "Muhammed Shafeeque KB": "4009", "Ashmil": "4010", "Nandu P": "4011" };
        const selectElem = document.getElementById('salesPerson');

        if (selectElem) {
            selectElem.value = salesPersonMap[user];
            document.getElementById('salesPersonId').value = salesPersonIdMap[user];

            // Trigger change to populate dealer dropdown
            const event = new Event('change');
            selectElem.dispatchEvent(event);
        }
    }
</script>

<body>
    <form id="salesForm">
        <h2>SUBMIT TAG DETAILS</h2>

        <label for="salesPerson">Sales Person:</label>
        <select id="salesPerson" name="salesPerson" required>
            <option value="" disabled>Select Sales Person</option>
            <option value="1" data-id="4004">Irshad</option>
            <option value="2" data-id="4005">Shafeek Rahman</option>
            <option value="3" data-id="4006">Sreejith P</option>
            <option value="4" data-id="4007">Sunish Chacko</option>
            <option value="5" data-id="4008">Vinod Kumar</option>
            <option value="6" data-id="4009">Muhammed Shafeeque KB</option>
            <option value="7" data-id="4010">Ashmil</option>
            <option value="8" data-id="4011">Nandu P</option>
            <option value="9" data-id="4012">Rony P Anto</option>
            <option value="10" data-id="4013">Manoj Kumar</option>
            <option value="11" data-id="4014">Digil Devassi</option>

        </select>
        <input type="text" id="salesPersonId" name="salesPersonId" placeholder="Sales Person ID" readonly>

        <label for="product">Product:</label>
        <select id="product" name="product" required>
            <option value="" disabled selected>Select Product</option>
            <option value="A" data-id="OG9000PC3L">Aluminium Pressure Cooker 3L</option>
            <option value="B" data-id="OG9001PC5L">Aluminium Pressure Cooker 5L</option>
            <option value="C" data-id="OG9019PC7.5L">Aluminium Pressure Cooker 7.5L</option>
            <option value="D" data-id="OG9018PC10L">Aluminium Pressure Cooker 10L</option>
            <option value="E" data-id="OG9020PC2P">Aluminium Pressure Cooker Combo 2P</option>
            <option value="F" data-id="OG9021PC3P">Aluminium Pressure Cooker Combo 3P</option>
            <option value="G" data-id="OG9022PCS3L">Stainless Steel Pressure Cooker 3L</option>
            <option value="H" data-id="OG9023PCS5L">Stainless Steel Pressure Cooker 5L</option>
            <option value="I" data-id="OG9024PCI3">Aluminium Pressure Cooker Inner Lid 3L</option>
            <option value="J" data-id="OG9025PCI5">Aluminium Pressure Cooker Inner Lid 5L</option>

            <option value="K" data-id="OG3001GC">2 Burner Gas Stove - Evoflame series</option>
            <option value="L" data-id="OG3002GC">3 Burner Gas Stove - Evoflame series</option>
            <option value="M" data-id="OG3003GC">2 Burner Gas Stove - Flamora series</option>
            <option value="N" data-id="OG3004GC">3 Burner Gas Stove - Flamora series</option>
            <option value="O" data-id="OG3000GC">4 Burner Gas Stove - Flamora series</option>
            <option value="OA" data-id="OG3005GC">3 Burner Gas Stove - Triaura</option>
       
            <option value="P" data-id="OG8000IC">Induction Cooktop -Touch</option>
            <option value="Q" data-id="OG8001IC">Induction Cooktop -Button</option>

            <option value="R" data-id="OG1500EK">Electric Kettle -1500</option>
            <option value="S" data-id="OG1501EK">Electric Kettle -1501</option>
            <option value="T" data-id="OG1502EK">Electric Kettle -1502</option>
            <option value="V" data-id="OG1503EK">SS Electric Kettle -1503</option>
            <option value="U" data-id="OG1504EK">SS Electric Kettle -1504</option>

            <option value="W" data-id="OG101D1">Dry Iron - 2KG</option>
            <option value="X" data-id="OG100D1">Dry Iron - 1.5KG</option>
            <option value="Y" data-id="OG102D1">Dry Iron - Light Weight</option>
            <option value="YA" data-id="OG103D1">Dry Iron - Light Weight Silka</option>
            <option value="YB" data-id="OG105D1">Dry Iron - Light Weight Dry Leaf</option>
            <option value="YC" data-id="OG104D1">Dry Iron - Medium Weight Loomlite</option>
           

            <option value="Z" data-id="OG7000NB">Mixer Blender - Red</option>
            <option value="AA" data-id="OG7000NB">Mixer Blender - Sliver</option>
            <option value="AB" data-id="OG7000NB">Mixer Blender - Purple</option>

            <option value="AC" data-id="OG9002TW">Non Stick Dosa Tawa -26cm</option>
            <option value="AD" data-id="OG9003TW">Non Stick Dosa Tawa -28cm</option>
            <option value="AE" data-id="OG9004FP">Non Stick Frypan -24cm</option>
            <option value="AF" data-id="OG9005FP">Non Stick Frypan -26cm</option>
            <option value="AG" data-id="OG9006KD">Non Stick Kadai with Glass Lid</option>
            <option value="AH" data-id="OG9007PT">Non Stick Pathiri Tawa-Round</option>
            <option value="AI" data-id="OG9008PT">Non Stick Pathiri Tawa-Square</option>
            <option value="AJ" data-id="OG9009CS9">Non Stick Biriyani Pot 9 PCS</option>

            <option value="AK" data-id="OG9010BP-4.5">Biriyani Pot with Glass Lid-4.5L</option>
            <option value="AL" data-id="OG9011BP-6">Biriyani Pot with Glass Lid-6L</option>
            <option value="AM" data-id="OG9012BP-8">Biriyani Pot with Glass Lid-8L</option>
            <option value="AN" data-id="OG9013BP-10">Biriyani Pot with Glass Lid-10L</option>
            <option value="AMA" data-id="OG9029BP8">Biriyani Pot with Glass Lid-Luxe BP8</option>
            <option value="ANA" data-id="OG9028BP10">Biriyani Pot with Glass Lid-Luxe BP10</option>

            <option value="AO" data-id="OG9014SP">Sauce Pan</option>
            <option value="AP" data-id="OG9015PP">Paniyarakkal</option>
            <option value="AQ" data-id="OG9016KTF">Kadai Tawa Frypan - 9016</option>
            <option value="AR" data-id="OG9017KTF">Kadai Tawa Frypan - 9017</option>
            <option value="AS" data-id="OG9026AC">Appachatty</option>
            <option value="AT" data-id="OG9027AC">Prime Appachatty</option>
           
           

        </select>
        <input type="text" id="productId" name="productId" placeholder="Product ID" readonly>

        <label for="productSerial">Product Serial Number:</label>
        <input type="text" id="productSerial" name="productSerial" placeholder="Enter Serial Number">

        <label for="dealerName">Dealer Name:</label>
        <select id="dealerName" name="dealerName" required>
            <option value="" disabled selected>Select Dealer</option>
        </select>

        <label for="dealerContact">Dealer Contact Number:</label>
        <input type="tel" id="dealerContact" name="dealerContact" required pattern="[0-9]{10}" placeholder="Dealer contact will appear here" readonly>

        <label for="complaint">Complaint:</label>
        <textarea id="complaint" name="complaint" rows="3" placeholder="Enter complaint details here..." required></textarea>

        <label for="complaintDate">Complaint Date:</label>
        <input type="date" id="complaintDate" name="complaintDate" required>

        <button type="submit">Submit</button>
    </form>

    <script>
        const salesPersonDealers = {
            "1": [
                { name: "4Yu Supermarket Chattiparmbil", contact: "9745600701", email: "dealerA1@email.com" },
                { name: "AAK HYPER MARKET TIRUR", contact: "9400330553", email: "dealerA2@email.com" },
                { name: "Aishwarya Metals, Kondotty", contact: "9895107127", email: "dealerA1@email.com" },
                { name: "Aishwarya Supermarket, Pulikkal", contact: "8281848356", email: "dealerA2@email.com" },
                { name: "Akam Home Appliances. EDAKKARA", contact: "9048812818", email: "dealerA1@email.com" },
                { name: "AL AMEEN HOME CENTRE", contact: "9846206951", email: "dealerA2@email.com" },
                { name: "Al Ghazali Pathrapura. Kondotty", contact: "9495306100", email: "dealerA1@email.com" },
                { name: "Alfa Appliances. Areekode", contact: "8547411276", email: "dealerA2@email.com" },
                { name: "ANSAS HOME LAND", contact: "9446949479", email: "" },
                { name: "Arafa Home Needs. EKKAPARAMBA", contact: "9048793031", email: "dealerA1@email.com" },
                { name: "Arafa Store.Morayur", contact: "9388825351", email: "dealerA2@email.com" },
                { name: "ASAS HOUSE LAND", contact: "7034948969", email: "dealerA1@email.com" },
                { name: "BHANUSHA AGENCIES, CHELARI", contact: "9846543759", email: "dealerA2@email.com" },
                { name: "Bharath Home Needs.AIKKARAPPADI", contact: "9847973847", email: "dealerA1@email.com" },
                { name: "BISMI HOME NEEDS", contact: "8590522831", email: "dealerA2@email.com" },
                { name: "BRK Home Needs Trippanachi", contact: "8089352010", email: "dealerA1@email.com" },
                { name: "Brothers Home Appliances,,mooripaadam", contact: "9567265736", email: "dealerA2@email.com" },
                { name: "Budget Home Needs,Pookkoottumpadam", contact: "9447681490", email: "" },
                { name: "BUHARI VESSAL PALACE KAKKATTIL", contact: "", email: "" },
                { name: "CARREFRESH HYPERMARKET,CHGUVETTI", contact: "+914832742222", email: "" },
                { name: "CHAMMANKUZHIYIL FANCY STORE EDATHANATTUKARA", contact: "8075434897", email: "" },
                { name: "CHITRA STORE.PARAPPANANGADI", contact: "9995219776", email: "" },
                { name: "CITY CENTER HOME BAZAR VALANCHERY", contact: "7034989191", email: "" },
                { name: "CKM SUPERMARKET, EDAVANNAPARA", contact: "8848685401", email: "" },
                { name: "Classic Agencies.Tirur", contact: "9895374913", email: "" },
                { name: "CORNER PLAZA, PAYYANAD,MANJERI", contact: "9656415543", email: "" },
                { name: "CP Home Needs.Karuvankallu", contact: "8943511760", email: "" },
                { name: "CP STORE MALAPPURAM", contact: "9778003535", email: "" },
                { name: "DIGITAL MART HOME APPLIANCES", contact: "9061780378", email: "" },
                { name: "DOMUM HOME APPLIANCES NELLIKUTH", contact: "9744466109", email: "" },
                { name: "MY HOME NELLIKKUTH", contact: "9744466109", email: "" },
                { name: "DREAMS HOME CENTRE.RAMAPURAM", contact: "8943806660", email: "" },
                { name: "EKKEES HOME CENTRE , THIRUNAVAYA", contact: "9744243938", email: "" },
                { name: "Electronics Mall. Pallikkal Bazar", contact: "9656246308", email: "" },
                { name: "Eminent Electricals Thanur", contact: "8089332970", email: "" },
                { name: "FAMILY HOME CENTER,OTHUKKUNGAL", contact: "9544247232", email: "" },
                { name: "FAMILY MART, THEYYALA", contact: "7025499600", email: "" },
                { name: "FATHIMA HOME CENTRE THEYYALA", contact: "9961574268", email: "" },
                { name: "FINGER TECH ELECTRICALS EDATHANATTUKARA", contact: "9447743189", email: "" },
                { name: "FOCUS FURNITURE AND ELECTRONICS.MUNDAKKULAM", contact: "9995786333", email: "" },
                { name: "Fridge House Home Appliances.Pandikkad", contact: "9188002418", email: "" },
                { name: "GLAZE Home Shopy Kavanoor", contact: "9745357123", email: "" },
                { name: "GLOCKERY HOME CENTRE.VENAGRA", contact: "8138003232", email: "" },
                { name: "GRAND ELECTRICALS EDATHANATTUKARA", contact: "8848625660", email: "" },
                { name: "Haimi Gulf Bazar", contact: "9746947750", email: "" },
                { name: "HAJEE METALS VENGARA", contact: "9605030768", email: "" },
                { name: "HAPPY METALS AND CROCKERIES.KUNNUMPURAM", contact: "9847352180", email: "" },
                { name: "HARITHA BED EMPORIUM  NILAMBUR", contact: "9447271468", email: "" },
                { name: "HOLIDAY INN HOME CENTRE EDATHANATTUKARA", contact: "7520185568", email: "" },
                { name: "HOME 10 VALLUVAMBRAM", contact: "9656282891", email: "" },
                { name: "Home Choice Electronics And Home Appliances. Wandoor", contact: "8921544766", email: "" },
                { name: "HOME CITY CHELARI", contact: "04942120200", email: "" },
                { name: "HOME CITY FURNITURE , VENGARA", contact: "9633050050", email: "" },
                { name: "HOME TEC METALS. PULIKKAL", contact: "9288909091", email: "" },
                { name: "HOMEY HOME NEEDS.MANJERI", contact: "9895232939", email: "" },
                { name: "HORIZONE ENTERPRISES Perinthalmanna road, Kolathur", contact: "1234567890", email: "" },
                { name: "IFA HYPERMARKET LLP", contact: "7807780705", email: "" },
                { name: "INFAS MARKET.PALASSERIMAAD,VENGARA", contact: "8330035575", email: "" },
                { name: "IQBAL HOME NEEDS PANDIKKAD, MALAPPURAM", contact: "9846495033", email: "" },
                { name: "JAM JOOM HYPERMARKET MALAPPURAM", contact: "0483 2735577", email: "" },
                { name: "K.M Bed And Furniture.Othayi", contact: "9495360060", email: "" },
                { name: "KAIRALI HOME NEEDS , AKAMPADAM, NILAMBUR", contact: "9048244382", email: "" },
                { name: "KALA METALS , NILAMBUR", contact: "9846341429", email: "" },
                { name: "KALAM AREEKODE", contact: "9744727278", email: "" },
                { name: "KANNANKANDY SALES CORPORATION TIRUR", contact: "0494-2424546", email: "" },
                { name: "Kinki Bazar. Pathanapuram", contact: "9495264263", email: "" },
                { name: "KITCHEN CORNER , PARAMBIL PEEDIKA", contact: "9744667593", email: "" },
                { name: "KITCHEN MART MUNDAKKULAM", contact: "9633484145", email: "" },
                { name: "KITCHEN PALACE EDAVANNA", contact: "1236547890", email: "" },
                { name: "Kitchen Vibes And Home Appliances.Wandoor", contact: "7483376837", email: "" },
                { name: "KITCHEN WORLD , NEAR BUS STAND AREEKODE", contact: "7306623991", email: "" },
                { name: "KODUVALI FURNITURE, MANIMOOLI", contact: "9447387053", email: "" },
                { name: "Kohinoor Store, THANUR", contact: "9995495547", email: "" },
                { name: "Kottayam Vessels, Edakkara", contact: "9633108802", email: "" },
                { name: "KPA PLASTIC PERINTHALMANNA", contact: "9656932715", email: "" },
                { name: "LATEST ELECTRICALS EDATHANATTUKKARA", contact: "8304059531", email: "" },
                { name: "LIYAS HOME CENTER, ANGADIPPURAM", contact: "7736656805", email: "" },
                { name: "MABROOK SUPERMARKET THARAYITTAL", contact: "7558042020", email: "" },
                { name: "MADEENA HOME NEEDS,ALANALLUR", contact: "9446789639", email: "" },
                { name: "Mahima Home Needs KONDOTTY", contact: "9847663829", email: "" },
                { name: "Malabar Home Appliances, Pandikkad", contact: "9544298125", email: "" },
                { name: "MANGO DIGI HUB , MAKKARAPPARAMBA", contact: "8089791640", email: "" },
                { name: "MARHABA CROCKERY CHUNGAM", contact: "9048798870", email: "" },
                { name: "MARS HOME CENTRE VENGARA", contact: "9656321320", email: "" },
                { name: "METRO MART EDAVANNAPPARA", contact: "9746105860", email: "" },
                { name: "METRO MART, EDAVANNAPPARA", contact: "8943779978", email: "" },
                { name: "MTM METALS AND GIFTS, WANDOOR", contact: "7352224444", email: "" },
                { name: "MUBARAK METALS AND CROCKERY", contact: "9809168911", email: "" },
                { name: "MY MOBILE TECHNOLOGIES,MANJERI", contact: "9447357917", email: "" },
                { name: "NADAKKAVIL LIGHTS VALANCHERY", contact: "9020491234", email: "" },
                { name: "Nakshatra Home Needs.Ayiranazipa", contact: "9539159691", email: "" },
                { name: "Nedumparayil Traders.Nilambur", contact: "9496305216", email: "" },
                { name: "NEW ASAS HOUSE LAND Kolappuram", contact: "9746105860", email: "" },
                { name: "New Bombay Kitchen Palace.Theyyala", contact: "8086853398", email: "" },
                { name: "NEW HAPPY HOME VENGARA", contact: "9747011929", email: "" },
                { name: "New Kitchen Gallery.Kadungallur", contact: "6282706767", email: "" },
                { name: "New Tahani Metals And Crockeries. Kizhisseri", contact: "7034828353", email: "" },
                { name: "NOBLE HOME , MANKADA", contact: "9497346046", email: "" },
                { name: "NOBLE HOME,KOZHIKKOTTUPARAMBA", contact: "6235346046", email: "" },
                { name: "NPK PATHRAKADA KOLATHUR", contact: "9744739504", email: "" },
                { name: "PARAYIL METALS PARAMBIL PEEDIKA, KADAPPADI", contact: "9847455630", email: "" },
                { name: "PAS Marketing, Munduparamba", contact: "9846007945", email: "" },
                { name: "PATATH HOME NEEDS CHUNGAM", contact: "9961863465", email: "" },
                { name: "PAATHRAPURA HOME CENTRE , PARAPPANANGADI", contact: "9895146915", email: "" },
                { name: "PATHRAPPURA, CHETTIPPADI", contact: "9895146915", email: "" },
                { name: "Perinthalmanna Store,Karuvarakundu", contact: "9744981966", email: "" },
                { name: "PERINTHALMANNA STORE,THUVVUR", contact: "9495140033", email: "" },
                { name: "Pinjus Light house, Pathappiriyam", contact: "7012647564", email: "" },
                { name: "PK HOME GALLERY PADIKKAL", contact: "1236547890", email: "" },
                { name: "PKR.A2Z.IRUMBUZHI", contact: "9746152991", email: "" },
                { name: "PLAZZO MART PARAMBIL PEEDIKA", contact: "9497550194", email: "" },
                { name: "PMK PAATHRAPURA, THANALUR", contact: "8139002706", email: "" },
                { name: "Ponnu home Needs.vallikkapatta", contact: "9846693909", email: "" },
                { name: "Poonthottathil Home Bazar, kozhikkottupparamba", contact: "7034524897", email: "" },
                { name: "RAFEEQUE HOME CENTRE CHEMMAD", contact: "6235111888", email: "" },
                { name: "Ragam ELECTRONICS. KONDOTTY", contact: "9847467809", email: "" },
                { name: "RAHMATH METALS.RAMAPURAM NAARANATH", contact: "9072220788", email: "" },
                { name: "REAL CROCKERY MAKKARAPPARAMBA", contact: "8590038790", email: "" },
                { name: "Royal Home Plaza Perinthalmanna,Angadippuram", contact: "9061495899", email: "" },
                { name: "SHALIMAR TRADE CENTRE , PERINTHALMANNA", contact: "9847147091", email: "" },
                { name: "SHANIBA HOME CITY Venniyur", contact: "9037901431", email: "" },
                { name: "SRS AGENCIS PARAPPANANGADI", contact: "1236547890", email: "" },
                { name: "Super Store PARAPPANANGADI", contact: "9895207758", email: "" },
                { name: "SYSTEM ELECTRONICS PERINTHALMANNA", contact: "9746257080", email: "" },
                { name: "Tahani Metals And Crockeries. Kizhisseri", contact: "9447441179", email: "" },
                { name: "THAVAYIL ELECTRONICS , EDAPPAL", contact: "04942683578", email: "" },
                { name: "TT METALS AND HOME NEEDS AKAPARAMBA", contact: "9995611205", email: "" },
                { name: "TWINS HOME APPLIANCES , THIRUNNAVAYA", contact: "9744439000", email: "" },
                { name: "UMMATHIS HOME STYLE VENGARA", contact: "9747215007", email: "" },
                { name: "UNITED FURNITURE , ARIPRA", contact: "9061105115", email: "" },
                { name: "V L Hypermarket. PADAPPARAMBA", contact: "6235932000", email: "" },
                { name: "V.L CROCKERY AND METALS CHATTIPPARAMBA", contact: "9747149785", email: "" },
                { name: "VALAPPIL HOME STYLE, CHANGUVATTI , KOTTAKKAL", contact: "9656800700", email: "" },
                { name: "Variety Store Valluvamburam", contact: "9745800272", email: "" },
                { name: "WHITE CROCKERY MALAPPURAM", contact: "9846757645", email: "" },
                { name: "YARA HYPER KADAPPADI", contact: "7902377776", email: "" },
                { name: "YES TIME , MELATTUR", contact: "8848235100", email: "" },
                { name: "ZAIN HOME APPLIANCES , MUNDUPARAMBA", contact: "9526029055", email: "" },
                { name: "Zam Zam Home Bazar. PUTHANATHANI", contact: "9744477979", email: "" },
                { name: "Zeenath Home Style. KUTTIPPURAM", contact: "9745675004", email: "" },
                { name: "ZODIAC ELECTRONICS, MALAPPURAM, KOTTAPPADI", contact: "9495735354", email: "" },
               

            ],
            "2": [
                { name: "ANORA STORE MOKERI", contact: "9445746562", email: "dealerB1@email.com" },
                { name: "ASHIK STORE NARIKKUNI KOZHIKODE", contact: "8593920538", email: "dealerB1@email.com" },
                { name: "BUHARI VESSAL PALACE KAKKATTIL", contact: "1234567890", email: "dealerB1@email.com" },
                { name: "CHALIYAR  Kunnamangalam", contact: "9562878429", email: "dealerB1@email.com" },
                { name: "CKV Home Appliance, Ramanattukara", contact: "8921621306", email: "dealerB1@email.com" },
                { name: "FLEX Pantheerankavu", contact: "1234567890", email: "dealerB1@email.com" },
                { name: "HIBA HOME NEEDS , ARAKKINAR", contact: "8075149515", email: "dealerB1@email.com" },
                { name: "HOME LAND Koduvalli", contact: "9645842273", email: "dealerB1@email.com" },
                { name: "HOME PONT CHALIYAM MARKET", contact: "9605940233", email: "dealerB1@email.com" },
                { name: "Homeland  Karanthoor", contact: "1234567890", email: "dealerB1@email.com" },
                { name: "JITHU CALICUT", contact: "9847977637", email: "dealerB1@email.com" },
                { name: "KITCHEN PARK HOME PALAYATH", contact: "9539341711", email: "dealerB1@email.com" },
                { name: "KOYILANDI STORE", contact: "7025424340", email: "dealerB1@email.com" },
                { name: "M.A  Super Market Kattangal", contact: "1234567890", email: "dealerB1@email.com" },
                { name: "MAHARANI METAL & HOTEL WARES", contact: "9947230123", email: "dealerB1@email.com" },
                { name: "MALABAR HOME APPLIANCES NADAPURAM", contact: "9745858534", email: "dealerB1@email.com" },
                { name: "MASCO  Parannur", contact: "1234567899", email: "dealerB1@email.com" },
                { name: "Mass Home world Perumanna", contact: "8547439880", email: "dealerB1@email.com" },
                { name: "MEHARUBA   Kaithapoyil", contact: "1234567890", email: "dealerB1@email.com" },
                { name: "MOOLEPAT STATIONARY CALICUT", contact: "9387834433", email: "dealerB1@email.com" },
                { name: "PARAVATHANI HOME APPLIANCES KOYILANDY", contact: "9447633365", email: "dealerB1@email.com" },
                { name: "PAYYOLI Store Payyoli", contact: "9847413559", email: "dealerB1@email.com" },
                { name: "Punchiri Kitchen World Mavoor", contact: "8891435376", email: "dealerB1@email.com" },
                { name: "SALAM STORE KUTTIKAATTOOR", contact: "9847177207", email: "dealerB1@email.com" },
                { name: "SONIC ELECTRONICS CRAFT KOYILANDY", contact: "9939013354", email: "dealerB1@email.com" },
                { name: "SR SUPERMARKET & GENERAL STORE VADAKARA", contact: "9495648518", email: "dealerB1@email.com" },
                { name: "VESSAL PALACE CHERUVADI", contact: "9495611384", email: "dealerB1@email.com" },
                { name: "X MART ELECTRONICS KOZHIKODE", contact: "7907307254", email: "dealerB1@email.com" },
                { name: "ZIYA METALS CHAKKUMKADAV- KOZHIKODE", contact: "9495687435", email: "dealerB1@email.com" },
               
            ],
            "3": [
                { name: "ADUKKALA KITCHEN APPLIANCE", contact: "9744310030", email: "dealerC1@email.com" },
                { name: "AISHWARYA STORE AND GIFT", contact: "9447688626", email: "dealerC2@email.com" }
            ],
            "4": [
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
            ],
            "5": [
                { name: "APPASONS ELECTRICS & APPLIANCE", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "BADUSHA HYPERMARKET", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "LAVANYA E-MART BALUSSERY", contact: "9645404042", email: "dealerC1@email.com" },
            ],
            "6": [
                { name: "GRAHALAKSHMI PULPALLY WAYANAD", contact: "9061157573", email: "dealerC1@email.com" },
                { name: "LULU SUPERMARKET ERUMAD", contact: "9489137707", email: "dealerC2@email.com" },
                { name: "MARY MATHA ELECTRICALS ERUMAD", contact: "9940848856", email: "dealerC1@email.com" },
                { name: "METTAL SPOT BATHERY", contact: "9605288512"},
                { name: "MPC ELECTRONICS MEPPADI", contact: "8590032728"},
                { name: "NP STORE PANAMARAM WAYANAD", contact: "9544553718"},
                { name: "RAJADHANI HOME CENTER WAYANAD", contact: "9747748011"},
                { name: "RANI METALS MEENANGADI", contact: "9895577628"},
                { name: "SAYONA ELECTRONICS MEENANGADI", contact: "8547072050"},
                { name: "STOVE CENTER BATHERY", contact: "9846258470"},
                { name: "VARNAM FANCY VADUVANJAL", contact: "9447316950"},
                { name: "AKASH ELECTRONICS MANANTHAVADI", contact: "9995919960"},
                { name: "AMBALAPALLI GIFT HOUSE KAATTILAPIKA", contact: "8943738701"},
                { name: "ANNA STATIONARY & GIFT KOROM", contact: "9995918366"},
                { name: "ANUGRAHA HOME COLLECTION BEENACHI", contact: "9744083020"},
                { name: "ARWAH CLINIC BATHERY", contact: "9143224224"},
                { name: "B Well Build Ware &Roofing chulliyode", contact: "9745050760"},
                { name: "BINDU METALS BATHERY", contact: "7012442799"},
                { name: "BLUE STAR PULPALLY", contact: "9961597496"},
                { name: "CKT HOME APPLIANCES MANANTHAVADY", contact: "9947880850"},
                { name: "CLIMAX MOBILES MANANTHAVADY", contact: "9061869869"},
                { name: "FILA FANCY VYTHIRI", contact: "9747540336"},
                { name: "GASCO AGENCIES MANANTHAVADY", contact: "9961244408"},
                { name: "Global Furniture &Home Appliance Karani", contact: "9400656490"},
                { name: "HI LITE FURNITURE KATTIKKULAM", contact: "9048552001"},
                { name: "HOME CENTER VELLUMUNDA WAYANAD", contact: "9946972355"},
                { name: "HYPER CITY HYPERMARKET  WAYANAD", contact: "6238873517"},
                { name: "JANAKIYA SUPERMARKET THARUVANA", contact: "9544782585"},
                { name: "KEY TEE HOMELY TOOLS PANAMARAM", contact: "7012454773"},
                { name: "KKM AGENCIES ANDOOR  VADUVANCHAL", contact: "9400520738"},
                { name: "KM Mettals Cheeral", contact: "9446647441"},
                { name: "KOCHERY HOME APPLIANCES KOROM", contact: "9961333516"},
                { name: "KP MOBILES & ELECTRONICS CHUNDEL", contact: "6238937214"},
                { name: "KSB STORE  KALLOOR WAYANAD", contact: "9495609495"},
                { name: "NANDANAM ELECTRONICS KOROM", contact: "8136856902"},
                { name: "NICE HYPER MARKET CHUNDEL", contact: "9961604100"},
                { name: "SALA HOME APPLIANCES CHUNDEL", contact: "7902458501"},
                { name: "SALEEM STORE  MANANTHAVADI", contact: "9847796449"},
                { name: "SHABANA STORES MEPPADI", contact: "8157906285"},
                { name: "SR TECH Vellamunda", contact: "7558870418"},
                { name: "SREE VINAYA AGENCY KALPETTA", contact: "8129711809"},
                { name: "SUJITH METALS MANANTHAVADY", contact: "9961470260"},
                { name: "TECHNO ELECTRICALS AMBALAVAYAL", contact: "7012690417"},
                { name: "THARA KITCHEN MART KAMBALAKKAD", contact: "8075295821"},
                { name: "VARNAM GIFT CENTER CHULLIYOD", contact: "9645454752"},
                { name: "WAYANAD METALS KALPETTA", contact: "8891202836"},
                { name: "WESTERN ELECTRONICS, MOBILES & HOME APPLIANCES", contact: "9747997244"},
               
            ],
            "7": [
                { name: "Al Dhana Furniture And Home Appliances", contact: "7902790415", email: "dealerC1@email.com" },
                { name: "BALKEEZ STORE BP ANGADI", contact: "9847094222", email: "dealerC2@email.com" },
                { name: "Dana House Hold", contact: "7306678145", email: "dealerC1@email.com" },
                { name: "Elite Spare House", contact: "9656738279", email: "dealerC1@email.com" },
                { name: "FATHIM HOME CENTER KADUNGHATHUKUND", contact: "9072996003", email: "dealerC2@email.com" },
                { name: "Fit Well Traders", contact: "7558926522", email: "dealerC1@email.com" },
                { name: "HORIZONE ENTERPRISES Kolathur", contact: "9526811143", email: "dealerC1@email.com" },
                { name: "K H HARDWARES & TOOLS KURUKATHANI", contact: "9037075756", email: "dealerC2@email.com" },
                { name: "K.M Bed And Furniture.Othayi", contact: "9495360060", email: "dealerC1@email.com" },
                { name: "AKARIMBANAKKAL HOME CENTRE EDAPPAL", contact: "9633918294", email: "dealerC1@email.com" },
                { name: "KM Stores Home Bazar", contact: "9072055622", email: "dealerC2@email.com" },
                { name: "KPA PLASTIC PERINTHALMANNA", contact: "9656932715", email: "dealerC1@email.com" },
                { name: "KULATHINGAL SUPERMARKET VALAMCHERY", contact: "8129216903", email: "dealerC1@email.com" },
                { name: "Marhaba Shoppee", contact: "9847599949", email: "dealerC1@email.com" },
                { name: "Mundekkat Home Bazar BP angadi", contact: "9633456768", email: "dealerC1@email.com" },
                { name: "OG Homz Kitchen Hub Kurukathani", contact: "9539084308", email: "dealerC1@email.com" },
                { name: "Plaza Crockery & Metals", contact: "9847066085", email: "dealerC1@email.com" },
                { name: "Popular Stores", contact: "9846192058", email: "dealerC1@email.com" },
                { name: "Pravasi Home Appliances", contact: "9778705450", email: "dealerC1@email.com" },
                { name: "ROYAL HOME CENTRE VAILATHUR", contact: "9747313954", email: "dealerC1@email.com" },
                { name: "Royal Home Plaza", contact: "9061495899", email: "dealerC1@email.com" },
                { name: "SALAM STORE VELIMUKKU", contact: "9349620699", email: "dealerC1@email.com" },
                { name: "TWINS FURNITURE & HOME APPLIANCES THIRUNNAVAYA", contact: "9744439000", email: "dealerC1@email.com" },
                { name: "VC STORE METALS CHEMMAD", contact: "9895519101", email: "dealerC1@email.com" },
            ],
            "8": [
                { name: "BLUEMOON  Kunnamangalam", contact: "1234567890", email: "dealerC1@email.com" },
                { name: "GRAND KITCHEN Narikkuni", contact: "1234567890", email: "dealerC2@email.com" },
                { name: "KUNNATH FURNITURE AND ELECTRONICS CHERUVADI", contact: "8086364137", email: "dealerC1@email.com" },
                { name: "LAVANYA E-MART MUKKAM", contact: "04952297410", email: "dealerC1@email.com" },
                { name: "LAVANYA KITCHEN MART MUKKAM", contact: "9645054041", email: "dealerC1@email.com" },
                { name: "MALABAR STORES MEPPAYUR", contact: "9645614395", email: "dealerC1@email.com" },
                { name: "Mass Home world Perumanna", contact: "8547439880", email: "dealerC1@email.com" },
                { name: "OTHAYOTH METALS MEPPAYUR", contact: "9846252073", email: "dealerC1@email.com" },
                { name: "PUTHUMA METALS ELETTIL VATTOLI", contact: "9539211313", email: "dealerC1@email.com" },
                { name: "REGAL KITCHEN WORLD CHEVARAMBALAM", contact: "9349332499", email: "dealerC1@email.com" },
                { name: "SALAM STORE KUTTIKAATTOOR", contact: "9847177207", email: "dealerC1@email.com" },
                { name: "TAJ HOME CARE MUKKAM", contact: "9946770432", email: "dealerC1@email.com" },
                { name: "UNCLES  PERUMANNA", contact: "9747020221", email: "dealerC1@email.com" },
               
            ],
            "9": [
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
            ],
            "10": [
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
            ],
            "11": [
                { name: "A", contact: "04962522885", email: "dealerC1@email.com" },
                { name: "B", contact: "9846892891", email: "dealerC2@email.com" },
                { name: "C", contact: "9645404042", email: "dealerC1@email.com" },
            ],


        };

        const salesPersonEmails = {
            "1": "irshad@ogeraglobal.com",
            "2": "shafeek.r@ogeraglobal.com",
            "3": "sreejith@ogeraglobal.com",
            "4": "sunish.c@ogeraglobal.com",
            "5": "vinod.kumar@ogeraglobal.com",
            "6": "m.shafeeque@ogeraglobal.com",
            "7": "ashmil@ogeraglobal.com",
            "8": "nandu@ogeraglobal.com",
            "9": "rony.p@ogeraglobal.com",
            "10": "manoj.kumar@ogeraglobal.com",
            "11": "digil.devassi@ogeraglobal.com",
        };

        const salesHeadEmail = "service@ogeraglobal.com";

        document.addEventListener('DOMContentLoaded', function () {
            window.dealerChoices = new Choices('#dealerName', { searchEnabled: true, itemSelectText: '', shouldSort: false });

            // ðŸŸ¢ Set today's date automatically
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('complaintDate').value = today;

            // Auto-fill Sales Person from login
            const user = sessionStorage.getItem('loggedInUser');
            if (user) {
                const salesPersonMap = { "Irshad": "1", "Shafeek Rahman": "2", "Sreejith P": "3", "Sunish Chacko": "4", "Vinod Kumar": "5", "Muhammed Shafeeque KB": "6" ,"Ashmil": "7", "Nandu P": "8", "Rony P Anto": "9", "Manoj Kumar": "10", "Digil Devassi": "11" };
                const salesPersonIdMap = { "Irshad": "4004", "Shafeek Rahman": "4005", "Sreejith P": "4006", "Sunish Chacko": "4007", "Vinod Kumar": "4008", "Muhammed Shafeeque KB": "4009", "Ashmil": "4010", "Nandu P": "4011", "Rony P Anto": "4012", "Manoj Kumar": "4013", "Digil Devassi": "4014" };
                const salesPersonSelect = document.getElementById('salesPerson');
                salesPersonSelect.value = salesPersonMap[user];
                document.getElementById('salesPersonId').value = salesPersonIdMap[user];

                // Populate dealers automatically
                const dealers = salesPersonDealers[salesPersonSelect.value] || [];
                window.dealerChoices.clearChoices();
                window.dealerChoices.setChoices(
                    dealers.map((dealer, idx) => ({
                        value: idx.toString(),
                        label: dealer.name,
                        customProperties: { contact: dealer.contact }
                    })), 'value', 'label', false
                );
            }
        });

        document.getElementById('salesPerson').addEventListener('change', function () {
            const selectedId = this.options[this.selectedIndex].getAttribute('data-id');
            document.getElementById('salesPersonId').value = selectedId;

            const dealers = salesPersonDealers[this.value] || [];
            window.dealerChoices.clearChoices();
            window.dealerChoices.setChoices(
                dealers.map((dealer, idx) => ({
                    value: idx.toString(),
                    label: dealer.name,
                    customProperties: { contact: dealer.contact }
                })), 'value', 'label', false
            );
            document.getElementById('dealerContact').value = '';
        });

        document.getElementById('product').addEventListener('change', function () {
            document.getElementById('productId').value = this.options[this.selectedIndex].getAttribute('data-id') || '';
        });

        document.getElementById('dealerName').addEventListener('change', function () {
            const selectedIdx = this.value;
            const salesPersonValue = document.getElementById('salesPerson').value;
            const selectedDealer = (salesPersonDealers[salesPersonValue] || [])[selectedIdx];
            document.getElementById('dealerContact').value = selectedDealer ? selectedDealer.contact : '';
        });

        document.getElementById('salesForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const autoCode = 'TAG-' + Math.floor(100000 + Math.random() * 900000);

            const salesPersonSelect = document.getElementById('salesPerson');
            const salesPersonId = document.getElementById('salesPersonId').value;
            const salesPersonName = salesPersonSelect.options[salesPersonSelect.selectedIndex].text;
            const salesPersonEmail = salesPersonEmails[salesPersonSelect.value];

            const productSelect = document.getElementById('product');
            const productId = document.getElementById('productId').value;
            const productName = productSelect.options[productSelect.selectedIndex].text;
            const productSerial = document.getElementById('productSerial').value;

            const dealerSelect = document.getElementById('dealerName');
            const dealerName = dealerSelect.options[dealerSelect.selectedIndex].text;
            const dealerContact = document.getElementById('dealerContact').value;

            const complaint = document.getElementById('complaint').value;
            const complaintDate = document.getElementById('complaintDate').value;

            const templateParams = {
                sales_person_name: salesPersonName,
                sales_person_id: salesPersonId,
                product_name: productName,
                product_id: productId,
                product_serial: productSerial,
                dealer_name: dealerName,
                dealer_contact: dealerContact,
                complaint: complaint,
                complaint_date: complaintDate,
                auto_code: autoCode
            };

            // Email to Sales Person
            emailjs.send('service_tj3qg0s', 'template_e59692j', { ...templateParams, to_email: salesPersonEmail })
                .then(() => {
                    // Email to Sales Head
                    emailjs.send('service_tj3qg0s', 'template_e59692j', { ...templateParams, to_email: salesHeadEmail })
                        .then(() => {
                            alert('Form submitted and emails sent!');
                            document.getElementById('salesForm').reset();
                            document.getElementById('salesPersonId').value = '';
                            document.getElementById('productId').value = '';
                            document.getElementById('dealerContact').value = '';
                            window.dealerChoices.clearChoices();
                        })
                        .catch(error => alert('Failed to send email to sales head: ' + error.text));
                })
                .catch(error => alert('Failed to send email to sales person: ' + error.text));
        });
    </script>
</body>
</html>
